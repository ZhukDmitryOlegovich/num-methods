# Выпускная работа студента

Жук Дмитрий Олегович, ИУ9-82Б, 2023

# Запуск

Рабочую программу уже можно найти по ссылкам и ничего не ставить:
1. https://zhukdmitryolegovich.github.io/num-methods/exp2/step1/
2. https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/

Или же запустить локально:
1. Скачать `npm` `7.20.3` и `node` `v16.6.0` (наверное подойдут и младше, но у меня такие)
2. Запустить `npm ci`
2. Запустить `npm start`
3. Открывать аналогичные ссылки заменяя `https://zhukdmitryolegovich.github.io/num-methods/exp2/` на `http://localhost:8080/exp2/`

# Взаимодействие

## Исследование №1 (`step1`)

- При открытие ссылки https://zhukdmitryolegovich.github.io/num-methods/exp2/step1/ - видим два графика, соответствуют записке, которая лежит в `exp2/Записка.pdf`
- Можно менять `t (step)`, `from (start)` и `to (end)` которые отвечают за плотность точек, начало старта и конца генерации графика соответственно
- Если поменять урл на https://zhukdmitryolegovich.github.io/num-methods/exp2/step1/#contrast, то графки будут ч/б
- Графикам можно изменять размер если тянуть за их правый нижний угл и прожав кнопку "Сгенерировать"
- Графики можно двигать, приблежать и отдалять

## Исследование №2 (`step2`)

- При открытие ссылки https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/ - видим машинку, можно управлять на WASD+Space, если врезаемся в стену - откатываемся на старт
- Вверху есть кнопки которые по умолчанию ещё и можно переключать через флаги:
	- Кнопка с глазами/очками - показывает трассу, чтобы при перезагрузке страницы была выключенна - дописываем к урлу `#hidePath`
	- Кнопка крестик/галочка - показывает чекпоинты, если пересечь в неправильном порядке (= перечесь красный), то прохождение сброится, чтобы при перезагрузке страницы была выключена - дописываем к урлу `#hideCheckpoint`
	- Кнопка летучая мышь/машина - показывает лучи-галаза машины. Их значение от 0 до 1 расположенны слева. Если навести на значение - луч подкрасится в зеленый. Чтобы при перезагрузке страницы была выключена - дописываем к урлу `#hideEye`
- Открываем https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/#onn#see:./neto1.json - машинка поедет сама под действием нейронной сети (если есть `#onn`, то это осцелляторная нейронная сеть - нельзя не ОНС давать данные для ОНС и наоборот). Другие возможные значения
	- https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/#onn#see:./neto2.json
	- https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/#see:./netb1.json
	- https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/#see:./netb2.json
- Открываем https://zhukdmitryolegovich.github.io/num-methods/exp2/step2/#train - запускается обучение - проседают fps и в консоли браузера пишется `start netTrained`. Как только обучение закончится - машина поедет. Чтобы вернут себе управление авто - жмем на руку человека/робота или включаем `#people`
- Если машина укатилась (а такое может произойти когда сворачиваешь экран) - жмешь кнопку на циклическую стрелку и она спавнится на старте
- Кнопка 1/бесконечность - при прохождение круга ставить ли машину снова на стартовую позицию или же продолжить ехать круги (флаг `#inf`). Если он включен и после обучения авто врезалось в ограду раньше чем доезало до финиша, то страница обновится и обучение начнется снова. Иначе машина просто отправится на старт с обученной нейронкой
- Если обученная нейронка нравится - пишем в консоль браузера `window.net.toJSON()` и копируем json в файл. Его можно будет после загрузить как и нейронки выше - указав путь до файла
- Жмем на машинку с номер трассы - трасса переключается
- Если запустить влкадку с флагом `#click:path`, то кликая по полю будет рисоваться замкнутая линия. Последнюю точку можно удалить сделав клик с зажатым `ctrl`. Если путь нравится - открываем консоль - копируем последний json - сохраняем куда-нибудь
- Также само с чекпоинтами - `#click:check` (важно - они должны задаваться в порядке следования автомобиля, достаточно указать 3 отрезка для корректной работы, но можно и 1)
- Когда есть все границы из `path` и чекпоинты из `check`, то их можно загрузить на сайт (правда значения будут валидны до перезагрузки - будьте аккуратны). Пишем `window.paths.push([path1, path2])` где на место `path1` и `path2` вставляем сохраненные json + обазятельно передаем `window.checkpoints.push(checkpoint1)` где `checkpoint1` - сохраненый json чекпоинтов. После этого при переключение трассы - добавится 4 трасса
	- Таким образом можно добавить сколько захочется трасс, т.к. `window.paths` и `window.checkpoints` - обычные массивы
- Справо от трассы - пишется некоторое количество отладочной информации: количество кадров в секунду, расстояние от машины до преграды для каждого из глаз, скорость, поворот и ускорение авто, количество успешно и неуспешно пройденных чекпоинтов (последнее всегда 0 кстати) и время прохождение круга в секундах
- Между "Исследованиями" можно переключаться по кнопкам справа сверху
- Слева сверху - ссылка ведет на репозиторий с кодом

## Уточнение

Ввобще парсинг флагов работает по принципу словаря `#флаг1:значение1#флаг2#флаг3:значение3` и тогда значение у флагов будет соответсвующие, а у `флаг2` будет значение по умолчанию равное `1`, соответственно флаги удобно включать-выключать если писать например `#hidePath:1` и `#hidePath:0`
